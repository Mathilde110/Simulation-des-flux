
    - name: Checkout repository
  uses: actions/checkout@v4
  with:
    persist-credentials: true

- name: Set up Python
  uses: actions/setup-python@v5
  with:
    python-version: '3.11'

- name: Install pandas
  run: pip install pandas

- name: Run update script
  run: python update_csv.py

- name: Configure Git
  run: |
    git config --global user.name "Mathilde"
    git config --global user.email "mathildefaggionbarbier@gmail.com"

- name: Commit and push changes
  run: |
    git add compteurs.csv
    git commit -m "Update CSV" || echo "No changes to commit"
    git pull --rebase
    git push
